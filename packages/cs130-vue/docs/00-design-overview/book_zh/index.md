# 序言

## 为什么需要这本总览书？

当你准备深入 Vue3 源码时，你可能会面临这样的困惑：

- 响应式、组件、渲染器、编译器这些模块之间是什么关系？
- 为什么 Vue3 要做这样的架构设计？有什么其他选择吗？
- 各个模块的职责边界在哪里？它们如何协作？
- 面对不同的业务场景，应该如何选择技术方案？

如果你直接跳入某个模块的源码，很容易"只见树木，不见森林"。你可能会理解某个函数的实现细节，却不明白为什么要这样设计。你可能会记住某个 API 的用法，却不清楚它在整个架构中扮演什么角色。

这就是为什么需要这本总览书。

## 本书的定位

本书是 **Vue3 源码级系列的第 0 本（L4-0）**，是整个系列的"地图"和"指南针"。

在《深入浅出 Vue.js》和《Vue.js 设计与实现》这两本经典著作的启发下，我们认为深入学习框架源码的最佳路径是：

1. **先理解设计理念**：明白为什么要这样设计
2. **再学习实现细节**：理解具体是如何实现的
3. **最后动手实践**：通过 Mini 实现加深理解

而本书就是这个路径的**第一步**——帮助你建立对 Vue3 整体架构的理解，为后续深入各个模块打下基础。

## 本书的特色

### 1. 对比式学习

我们不仅讲解 Vue3 的设计，还会对比：

- **历史对比**：Vue2 vs Vue3 的设计演进
- **横向对比**：Vue3 vs React vs Svelte 的设计差异
- **方案对比**：同一问题的不同解决方案

通过对比，你会理解每个设计选择背后的权衡和考量。

### 2. 问题驱动

每个章节都围绕一个核心问题展开：

- "为什么 Vue3 选择 Proxy 而不是 Object.defineProperty？"
- "为什么需要 Block Tree 和 PatchFlags？"
- "编译器和运行时的职责边界在哪里？"

我们会从问题出发，引导你思考设计的动机，然后给出答案。

### 3. 全局视角

本书会帮你建立几个关键的认知框架：

- **模块职责矩阵**：各个模块负责什么，不负责什么
- **协作流程图**：模块之间如何配合工作
- **设计权衡表**：每个设计选择的优势与代价

这些框架会贯穿整个系列的学习。

## 你将获得什么

读完本书，你将：

- ✅ **建立全局视野**：理解 Vue3 生态系统的整体架构
- ✅ **掌握设计思维**：理解框架设计的方法论和思考模式
- ✅ **做出明智选择**：能够根据业务场景选择合适的技术方案
- ✅ **为深入学习做好准备**：知道从哪里开始，如何安排学习路径

## 本书的结构

本书分为十个部分：

**第一部分**介绍 Vue3 的设计哲学，包括核心理念、Composition API 动机、性能优化策略等。

**第二到第五部分**分别深入响应式、组件、渲染器、编译器四大核心模块，对比它们的设计选择。

**第六到第八部分**讨论 Router、Pinia、SSR 的架构设计，以及与其他方案的对比。

**第九部分**讲解各个模块的协作与边界。

**第十部分**总结技术选型和架构决策的方法论。

## 如何阅读本书

### 推荐路径

1. **按顺序阅读第一部分**：建立对 Vue3 整体设计理念的理解
2. **根据兴趣选读第二到第八部分**：如果你对某个模块特别感兴趣，可以先读那部分
3. **必读第九和第十部分**：这是整个系列的精华，讲解架构思维

### 学习建议

- 每个章节都有"核心问题"和"关键设计"的总结，建议先看这些总结
- 遇到不理解的概念，可以先跳过，后续深入各模块时会详细讲解
- 建议准备一个笔记本，记录下你的疑问和思考
- 可以结合 Vue3 官方文档和源码一起阅读

## 与后续书籍的关系

本书是 L4 系列的总览，后续的书籍结构如下：

```
L4-0: 总览书（本书） ← 你在这里
  ↓ 建立全局视野后，选择感兴趣的模块深入
L4-1: 响应式系统源码深度解析
L4-2: 从零实现 Mini Vue Reactivity
L4-3: 组件系统源码深度解析
L4-4: 从零实现 Mini Vue Component
L4-5: 渲染器源码深度解析
L4-6: 从零实现 Mini Vue Renderer
L4-7: 编译器源码深度解析
L4-8: 从零实现 Mini Vue Compiler
L4-9: Vue Router 源码深度解析
L4-10: 从零实现 Mini Vue Router
L4-11: Pinia 源码深度解析
L4-12: 从零实现 Mini Pinia
L4-13: Vue SSR 源码深度解析
L4-14: 从零实现 Mini Vue SSR
```

建议的学习顺序：

1. 先读本书（L4-0）
2. 根据兴趣选择一个核心模块（如响应式），读源码书（L4-1）
3. 通过 Mini 实现书（L4-2）加深理解
4. 继续其他模块的学习

## 致谢

本书的写作受到《深入浅出 Vue.js》（刘博文著）和《Vue.js 设计与实现》（霍春阳著）的深刻启发。这两本书展示了如何以"设计思想→源码解析"的方式讲解框架，给我们提供了宝贵的方法论。

同时，感谢 Vue3 核心团队的开源贡献，让我们能够学习到如此优秀的框架设计。

## 准备好了吗？

让我们开始这趟 Vue3 架构设计之旅。从全局视角理解 Vue3 的设计哲学，为后续深入源码打下坚实基础。

[开始阅读第一部分：Vue3 架构设计哲学 →](design/vue3-birth-motivation.md)
